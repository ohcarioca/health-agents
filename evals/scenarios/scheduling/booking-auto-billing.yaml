id: scheduling-booking-auto-billing
agent: scheduling
locale: pt-BR
description: "Patient books appointment with auto-billing enabled, provides CPF/email"

persona:
  name: Ana Costa
  phone: "11987650020"
  cpf: "12345678901"
  email: "ana.costa@email.com"
  personality: "cooperative, provides info quickly when asked"
  goal: "Book a cardiology appointment with Dr. Joao Silva for next week"

fixtures:
  module_configs:
    - module_type: billing
      settings: { auto_billing: true }
  professionals:
    - id: eval-prof-1
      name: Dr. Joao Silva
      specialty: Cardiologia
      appointment_duration_minutes: 30
      schedule_grid:
        monday: [{ start: "08:00", end: "12:00" }, { start: "14:00", end: "18:00" }]
        tuesday: [{ start: "08:00", end: "12:00" }, { start: "14:00", end: "18:00" }]
        wednesday: [{ start: "08:00", end: "12:00" }, { start: "14:00", end: "18:00" }]
        thursday: [{ start: "08:00", end: "12:00" }, { start: "14:00", end: "18:00" }]
        friday: [{ start: "08:00", end: "12:00" }, { start: "14:00", end: "18:00" }]
  services:
    - id: eval-svc-1
      name: Consulta Cardiologica
      duration_minutes: 30
      base_price_cents: 25000
  professional_services:
    - professional_id: eval-prof-1
      service_id: eval-svc-1
      price_cents: 25000

guardrails:
  never_contains: ["erro"]

expectations:
  tools_called: [check_availability, book_appointment]
  goal_achieved: true
  assertions:
    appointment_created: true
    invoice_status: pending
    payment_link_created: true

max_turns: 15
